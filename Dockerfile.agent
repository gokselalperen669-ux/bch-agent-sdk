# ðŸ¤– BCH Agent 7/24 Runtime Environment
# Use this Dockerfile to keep your autonomous agents alive in the cloud.

FROM node:20-slim

WORKDIR /app

# Install system dependencies for node-canvas or other crypto libs if needed
RUN apt-get update && apt-get install -y \
    python3 \
    make \
    g++ \
    && rm -rf /var/lib/apt/lists/*

# Copy package files
COPY package*.json ./

# Install dependencies
RUN npm install

# Install ts-node globally to run agents directly
RUN npm install -g ts-node typescript

# Copy the SDK and the project files
COPY . .

# Environment Variables (Inject these in your VPS or Docker Compose)
# SUPABASE_URL=...
# SUPABASE_ANON_KEY=...
# OPENAI_API_KEY=...

# Default command: Runs the agent specified by AGENT_NAME
# Usage: docker run -e AGENT_NAME=MyAlphaAgent agent-image
CMD ["sh", "-c", "npx ts-node src/${AGENT_NAME:-index}.ts"]
