services:
  nexus-engine:
    build:
      context: .
      dockerfile: Dockerfile
    ports:
      - "4000:4000"
    environment:
      - NODE_ENV=production
      - PORT=4000
      - JWT_SECRET=${JWT_SECRET:-nexus_secret_bolt_2026}
      - SUPABASE_URL=${SUPABASE_URL}
      - SUPABASE_KEY=${SUPABASE_KEY}
    restart: always

  # Example of running a specific autonomous agent in its own container
  # agent-alpha:
  #   build:
  #     context: .
  #     dockerfile: Dockerfile.agent
  #   environment:
  #     - AGENT_NAME=AlphaAgent
  #     - AGENT_API_URL=http://nexus-engine:4000
  #   depends_on:
  #     - nexus-engine
